
<div fxLayout="column">
  <div class="align-horizontally">
    <div fxFlex=100 fxLayout="row" fxLayoutGap="20px" fxLayoutAlign="end center" style="padding: 1em 0 1em 0;">
      <button mat-raised-button type="button" (click)="addUser()" color="primary" style="width:100px;">Add User</button>
    </div>
  </div>
  <div class="table-container mat-elevation-z8" [scrollTop]="scrollTopPosition" (scroll)="onScroll($event)">

    <mat-table *ngIf="dataSource" [dataSource]="dataSource" matSort (matSortChange)="sortData($event)">
      <ng-container *ngFor="let column of columnList;" matColumnDef="{{ column.key }}">
        <mat-header-cell *matHeaderCellDef mat-sort-header [ngSwitch]="column.key" style="font-weight: bold;font-size: 15px;">
          {{ column.title }}
        </mat-header-cell>
        <mat-cell *matCellDef="let row" [ngSwitch]="column.key">
          <span>
            {{ row[column.key] }}
          </span>
        </mat-cell>
      </ng-container>

      <!--groupedColumn -->

      <ng-container matColumnDef="filter">
        <mat-header-cell *matHeaderCellDef colspan="1">
          <button mat-icon-button matTooltip="Filter" (click)="openFilter()">
            <mat-icon>filter_list</mat-icon>
          </button>
          <mat-form-field style="width: 40%;">
            <input matInput type="text" [(ngModel)]="filterLabel" readonly="true">
          </mat-form-field>
        </mat-header-cell>
      </ng-container>
      <ng-container matColumnDef="action">
        <mat-header-cell class="last-cell" *matHeaderCellDef></mat-header-cell>
        <mat-cell class="last-cell" *matCellDef="let row" (click)="$event.stopPropagation()">
          <button mat-icon-button matTooltip="Edit Data" (click)="editUser(row)">
            <mat-icon>edit</mat-icon>
          </button>
          <button mat-icon-button matTooltip="Reset Password" (click)="resetPassword(row)">
            <mat-icon>cached</mat-icon>
          </button>
        </mat-cell>
      </ng-container>

      <mat-header-row *matHeaderRowDef="displayedColumns; sticky:true;" class="headerSpacing"></mat-header-row>
      <mat-row *matRowDef="let row; columns: displayedColumns;" style="min-height: 40px;"></mat-row>
    </mat-table>
    <mat-paginator fxLayout="row" fxLayoutAlign="end end" #paginator [pageSize]="model.pageSize" [pageSizeOptions]="[5, 10, 25, 100]" [length]="countTotal" [pageIndex]="currentPage" [showFirstLastButtons]="true"></mat-paginator>
  </div>

</div>
<span *ngIf="showLoad" class="loading"></span>
